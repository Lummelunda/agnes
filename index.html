<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fr√•ga Agnes (Snabbversion)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
    <style>
        body { background-color: #f3f4f6; font-family: sans-serif; }
        .highlight { background-color: #fef08a; padding: 0 2px; }
    </style>
</head>
<body class="p-8 max-w-3xl mx-auto">

    <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">üë©‚Äç‚öïÔ∏è Fr√•ga Agnes Wold</h1>
        <p class="text-gray-600">S√∂k bland hundratals svar. Blixtsnabbt & inget server-tjafs.</p>
    </div>

    <div class="relative mb-8">
        <input type="text" id="searchInput" 
            class="w-full p-4 rounded-xl shadow-lg border border-gray-200 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="S√∂k efter socker, s√∂mn, f√∂rkylning...">
        <div class="absolute right-4 top-4 text-gray-400">üîç</div>
    </div>

    <div id="results" class="space-y-4"></div>

    <script src="data.js"></script>

    <script>
        // 1. Konfigurera Fuse.js (Inst√§llningar f√∂r s√∂kningen)
        const options = {
            includeScore: true,
            threshold: 0.4, // 0.0 = Exakt matchning, 1.0 = Matchar allt (0.4 √§r bra balans)
            keys: [
                { name: 'fr√•ga', weight: 0.7 }, // Fr√•gan √§r viktigast
                { name: 'svar', weight: 0.3 }   // S√∂k √§ven lite i svaret
            ]
        };

        // Starta s√∂kmotorn med datan fr√•n data.js
        const fuse = new Fuse(agnesData, options);

        const searchInput = document.getElementById('searchInput');
        const resultsContainer = document.getElementById('results');

        // Funktion f√∂r att visa resultat
        function displayResults(query) {
            resultsContainer.innerHTML = ""; // Rensa gamla svar
            
            if (!query) return; // G√∂r inget om rutan √§r tom

            const results = fuse.search(query);

            if (results.length === 0) {
                resultsContainer.innerHTML = `<div class="text-center text-gray-500">Inga tr√§ffar p√• "${query}"</div>`;
                return;
            }

            // Visa max 10 tr√§ffar
            results.slice(0, 10).forEach(result => {
                const item = result.item;
                
                const html = `
                    <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition duration-200">
                        <h3 class="font-bold text-lg text-gray-800 mb-2">${item.fr√•ga}</h3>
                        <p class="text-gray-700 mb-4">${item.svar}</p>
                        <div class="flex justify-between items-center text-sm text-gray-400 border-t pt-3">
                            <span>üìÖ ${item.datum || 'Ok√§nt datum'}</span>
                            <a href="${item.url}" target="_blank" class="text-blue-500 hover:underline">
                                Lyssna p√• avsnittet üéß
                            </a>
                        </div>
                    </div>
                `;
                resultsContainer.innerHTML += html;
            });
        }

        // Lyssna p√• n√§r anv√§ndaren skriver
        searchInput.addEventListener('input', (e) => {
            displayResults(e.target.value);
        });
    </script>
</body>
</html>